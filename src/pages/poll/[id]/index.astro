---
import { getSession } from 'auth-astro/server';
import '@/styles/globals.css';
import Layout from '../../../layouts/Layout.astro';
import { createCaller } from '../../../lib/trpc/routers/_app';

const session = await getSession(Astro.request);
const caller = createCaller({
  user: session,
  req: Astro.request,
  resHeaders: Astro.response.headers
});

const poll = await caller.poll.get('744OB4J1Wq');
console.log(poll);
---

<Layout title="Login">
  <main class="flex justify-center items-center min-h-screen bg-gray-100">
    <div class="w-full max-w-5xl p-8 bg-white rounded-lg shadow-md mx-4">
      <h1 class="text-2xl font-bold text-gray-900 mb-6">Create new Poll</h1>
      <!-- Your form here -->
      <!-- Container for the poll -->
      <div class="space-y-4 max-w-md mx-auto mt-8">
        <!-- Pizza Hut Card -->
        <div
          class="bg-blue-100 shadow-lg rounded-lg overflow-hidden"
          style="background-color: rgba(59, 130, 246, 0.467);"
        >
          <div class="p-4">
            <div class="flex items-center justify-between">
              <span>Pizza Hut</span>
              <span>46.68%</span>
            </div>
            <div class="w-full bg-gray-200 rounded-full h-2.5">
              <div class="bg-blue-600 h-2.5 rounded-full" style="width: 46.68%">
              </div>
            </div>
          </div>
        </div>

        <!-- Dominoes Card -->
        <div
          class="bg-blue-100 shadow-lg rounded-lg overflow-hidden"
          style="background-color: rgba(59, 130, 246, 0.271);"
        >
          <div class="p-4">
            <div class="flex items-center justify-between">
              <span>Dominoes</span>
              <span>27.1%</span>
            </div>
            <div class="w-full bg-gray-200 rounded-full h-2.5">
              <div class="bg-blue-600 h-2.5 rounded-full" style="width: 27.1%">
              </div>
            </div>
          </div>
        </div>

        <!-- Papa John's Card -->
        <div
          class="bg-blue-100 shadow-lg rounded-lg overflow-hidden"
          style="background-color: rgba(59, 130, 246, 0.148);"
        >
          <div class="p-4">
            <div class="flex items-center justify-between">
              <span>Papa John's</span>
              <span>14.82%</span>
            </div>
            <div class="w-full bg-gray-200 rounded-full h-2.5">
              <div class="bg-blue-600 h-2.5 rounded-full" style="width: 14.82%">
              </div>
            </div>
          </div>
        </div>

        <!-- Little Caesars Card -->
        <div
          class="bg-blue-100 shadow-lg rounded-lg overflow-hidden"
          style="background-color: rgba(59, 130, 246, 0.114);"
        >
          <div class="p-4">
            <div class="flex items-center justify-between">
              <span>Little Caesars</span>
              <span>11.37%</span>
            </div>
            <div class="w-full bg-gray-200 rounded-full h-2.5">
              <div class="bg-blue-600 h-2.5 rounded-full" style="width: 11.37%">
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
</Layout>
<!-- <div class="flex justify-center items-center my-4">
	<div class="bg-white shadow-md rounded-full overflow-hidden">
	  <div class="flex items-center">
		<div class="text-white bg-blue-500 rounded-l-full py-2 px-4" style="width: 27.1%;">
		  <span>Dominoes</span>
		</div>
		<div class="py-2 px-4">
		  <span class="text-gray-800">27.1%</span>
		</div>
	  </div>
	</div>
  </div> -->
